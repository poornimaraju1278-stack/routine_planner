<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>ğŸ Routine Recommender</title>

    <!-- Bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- PyScript -->
    <link rel="stylesheet" href="https://pyscript.net/latest/pyscript.css">
    <script defer src="https://pyscript.net/latest/pyscript.js"></script>

    <style>
        body {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            overflow: hidden;
        }

        .slide {
            width: 100vw;
            height: 100vh;
            display: none;
            padding: 40px;
            text-align: center;
        }

        .active {
            display: block;
        }

        .card {
            background: rgba(255,255,255,0.15);
            border-radius: 20px;
            padding: 20px;
            margin: auto;
            max-width: 500px;
        }

        button {
            border-radius: 30px !important;
        }

        .dark {
            background: #121212;
            color: white;
        }
    </style>
</head>

<body>

<!-- ğŸŒ™ DARK MODE -->
<button class="btn btn-light position-fixed top-0 end-0 m-3" onclick="toggleDark()">ğŸŒ™</button>

<!-- SLIDE 1 -->
<section class="slide active">
    <h1>ğŸ Routine Recommender</h1>
    <p>Plan your day. Improve your life.</p>
    <button class="btn btn-warning" onclick="nextSlide()">Get Started ğŸš€</button>
</section>

<!-- SLIDE 2 -->
<section class="slide">
    <div class="card">
        <h2>ğŸ‘¤ Your Name</h2>
        <input id="name" class="form-control" placeholder="Enter your name">
        <select id="role" class="form-control mt-2">
            <option>Student ğŸ“</option>
            <option>Employee ğŸ’¼</option>
            <option>Freelancer ğŸ§‘â€ğŸ’»</option>
            <option>Other</option>
        </select>
        <button class="btn btn-success mt-3" onclick="saveUser()">Next â¡ï¸</button>
    </div>
</section>

<!-- SLIDE 3 -->
<section class="slide">
    <div class="card">
        <h2>â° Daily Routine</h2>
        Wake-up: <input type="time" id="wake"><br><br>
        Sleep: <input type="time" id="sleep">
        <button class="btn btn-success mt-3" onclick="saveRoutine()">Next â¡ï¸</button>
    </div>
</section>

<!-- SLIDE 4 -->
<section class="slide">
    <div class="card">
        <h2>ğŸ¯ Goal</h2>
        <input id="goal" class="form-control" placeholder="Today's main goal">
        <select id="priority" class="form-control mt-2">
            <option>Low</option>
            <option>Medium</option>
            <option>High</option>
        </select>
        <button class="btn btn-success mt-3" onclick="saveGoal()">Generate ğŸ§ </button>
    </div>
</section>

<!-- FINAL SLIDE -->
<section class="slide">
    <div class="card">
        <h2>ğŸ“‹ Your Daily Plan</h2>
        <div id="output"></div>
        <button class="btn btn-dark mt-3" onclick="window.print()">ğŸ“„ Download PDF</button>
    </div>
</section>

<!-- JAVASCRIPT -->
<script>
let slides = document.querySelectorAll(".slide");
let current = 0;

function nextSlide() {
    slides[current].classList.remove("active");
    current++;
    slides[current].classList.add("active");
}

function saveUser() {
    localStorage.name = document.getElementById("name").value;
    localStorage.role = document.getElementById("role").value;
    nextSlide();
}

function saveRoutine() {
    localStorage.wake = document.getElementById("wake").value;
    localStorage.sleep = document.getElementById("sleep").value;
    nextSlide();
}

function saveGoal() {
    localStorage.goal = document.getElementById("goal").value;
    localStorage.priority = document.getElementById("priority").value;

    let result = pyscript.interpreter.globals.get("generate_plan")(
        localStorage.name,
        localStorage.role,
        localStorage.wake,
        localStorage.sleep,
        localStorage.goal,
        localStorage.priority
    );

    document.getElementById("output").innerHTML = result;
    nextSlide();
}

function toggleDark() {
    document.body.classList.toggle("dark");
}
</script>

<!-- PYTHON LOGIC -->
<py-script>
from datetime import date

def generate_plan(name, role, wake, sleep, goal, priority):
    today = date.today().strftime("%d %B %Y")

    plan = f"""
    ğŸ“… <b>{today}</b><br><br>
    ğŸ‘‹ Hello <b>{name}</b>!<br><br>
    ğŸŒ… Wake up at <b>{wake}</b><br>
    ğŸ“š Focus on: <b>{goal}</b><br>
    â­ Priority: <b>{priority}</b><br><br>
    """

    if "Student" in role:
        plan += "ğŸ“ Student Mode Activated<br>ğŸ“ Extra study + revision added<br><br>"

    plan += f"""
    â˜• Take breaks regularly<br>
    ğŸ§ Free time in evening<br>
    ğŸŒ™ Sleep at <b>{sleep}</b><br><br>
    ğŸ’¡ Stay consistent. Small steps daily!
    """

    return plan
</py-script>

</body>
</html>
